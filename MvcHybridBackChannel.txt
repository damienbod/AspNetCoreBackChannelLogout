2021-02-02 21:38:38.163 +01:00 [INF] User profile is available. Using 'C:\Users\stduser\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-02-02 21:38:38.997 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2021-02-02 21:38:38.998 +01:00 [INF] Hosting environment: Development
2021-02-02 21:38:39.018 +01:00 [INF] Content root path: C:\git\damienbod\AspNetCoreBackChannelLogout\MvcHybridBackChannel
2021-02-02 21:38:39.102 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/ - -
2021-02-02 21:38:39.697 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel)'
2021-02-02 21:38:39.879 +01:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:38:39.960 +01:00 [INF] Executing ViewResult, running view Index.
2021-02-02 21:38:41.431 +01:00 [INF] Executed ViewResult - view Index executed in 1495.1228ms.
2021-02-02 21:38:41.438 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel) in 1557.9959ms
2021-02-02 21:38:41.440 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel)'
2021-02-02 21:38:41.705 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - -
2021-02-02 21:38:41.721 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - -
2021-02-02 21:38:41.747 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - -
2021-02-02 21:38:41.747 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - -
2021-02-02 21:38:41.844 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/ - - - 200 - text/html;+charset=utf-8 2747.3979ms
2021-02-02 21:38:41.925 +01:00 [INF] Sending file. Request path: '/js/site.min.js'. Physical path: 'C:\git\damienbod\AspNetCoreBackChannelLogout\MvcHybridBackChannel\wwwroot\js\site.min.js'
2021-02-02 21:38:42.003 +01:00 [INF] Sending file. Request path: '/css/site.min.css'. Physical path: 'C:\git\damienbod\AspNetCoreBackChannelLogout\MvcHybridBackChannel\wwwroot\css\site.min.css'
2021-02-02 21:38:42.003 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - - - 200 0 application/javascript 255.7630ms
2021-02-02 21:38:42.005 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - - - 200 128 text/css 257.1693ms
2021-02-02 21:38:42.054 +01:00 [INF] Sending file. Request path: '/js/vendor.min.js'. Physical path: 'C:\git\damienbod\AspNetCoreBackChannelLogout\MvcHybridBackChannel\wwwroot\js\vendor.min.js'
2021-02-02 21:38:42.054 +01:00 [INF] Sending file. Request path: '/css/vendor.min.css'. Physical path: 'C:\git\damienbod\AspNetCoreBackChannelLogout\MvcHybridBackChannel\wwwroot\css\vendor.min.css'
2021-02-02 21:38:42.061 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - - - 200 161285 text/css 356.2196ms
2021-02-02 21:38:42.062 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - - - 200 173396 application/javascript 355.2414ms
2021-02-02 21:38:54.191 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:38:54.213 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-02-02 21:38:55.334 +01:00 [INF] AuthenticationScheme: oidc was challenged.
2021-02-02 21:38:55.338 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 302 - - 1147.6961ms
2021-02-02 21:39:17.749 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/ - -
2021-02-02 21:39:17.776 +01:00 [INF] Cookies was not authenticated. Failure message: Unprotect ticket failed
2021-02-02 21:39:17.776 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel)'
2021-02-02 21:39:17.777 +01:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:39:17.803 +01:00 [INF] Executing ViewResult, running view Index.
2021-02-02 21:39:17.860 +01:00 [INF] Executed ViewResult - view Index executed in 61.8376ms.
2021-02-02 21:39:17.860 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel) in 83.1275ms
2021-02-02 21:39:17.861 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel)'
2021-02-02 21:39:17.863 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/ - - - 200 - text/html;+charset=utf-8 112.5083ms
2021-02-02 21:39:17.926 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - -
2021-02-02 21:39:17.926 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - -
2021-02-02 21:39:17.927 +01:00 [INF] The file /css/site.min.css was not modified
2021-02-02 21:39:17.928 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - - - 304 - text/css 1.5918ms
2021-02-02 21:39:17.928 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - -
2021-02-02 21:39:17.929 +01:00 [INF] The file /js/vendor.min.js was not modified
2021-02-02 21:39:17.929 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - - - 304 - application/javascript 0.6205ms
2021-02-02 21:39:17.929 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - -
2021-02-02 21:39:17.930 +01:00 [INF] The file /js/site.min.js was not modified
2021-02-02 21:39:17.930 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - - - 304 - application/javascript 0.7973ms
2021-02-02 21:39:17.931 +01:00 [INF] The file /css/vendor.min.css was not modified
2021-02-02 21:39:17.931 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - - - 304 - text/css 4.7098ms
2021-02-02 21:39:23.947 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:39:23.951 +01:00 [INF] Cookies was not authenticated. Failure message: Unprotect ticket failed
2021-02-02 21:39:23.951 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-02-02 21:39:23.952 +01:00 [INF] AuthenticationScheme: oidc was challenged.
2021-02-02 21:39:23.953 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 302 - - 6.3352ms
2021-02-02 21:39:24.213 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44327/signin-oidc application/x-www-form-urlencoded 1640
2021-02-02 21:39:25.023 +01:00 [INF] AuthenticationScheme: Cookies signed in.
2021-02-02 21:39:25.024 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44327/signin-oidc application/x-www-form-urlencoded 1640 - 302 - - 811.5936ms
2021-02-02 21:39:25.037 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:39:27.805 +01:00 [INF] Authorization was successful.
2021-02-02 21:39:27.805 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:39:27.808 +01:00 [INF] Route matched with {action = "Secure", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Secure() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:39:27.810 +01:00 [INF] Executing ViewResult, running view Secure.
2021-02-02 21:39:27.818 +01:00 [INF] Executed ViewResult - view Secure executed in 9.4786ms.
2021-02-02 21:39:27.818 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel) in 10.0737ms
2021-02-02 21:39:27.818 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:39:27.819 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 200 - text/html;+charset=utf-8 2781.8078ms
2021-02-02 21:39:38.338 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/home/renewtokens - -
2021-02-02 21:39:43.092 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.RenewTokens (MvcHybridBackChannel)'
2021-02-02 21:39:43.121 +01:00 [INF] Route matched with {action = "RenewTokens", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RenewTokens() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:39:43.148 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:39:43.150 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:39:43.184 +01:00 [INF] Received HTTP response headers after 27.4794ms - 200
2021-02-02 21:39:43.186 +01:00 [INF] End processing HTTP request after 39.963ms - 200
2021-02-02 21:39:43.208 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:39:43.209 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:39:43.215 +01:00 [INF] Received HTTP response headers after 6.459ms - 200
2021-02-02 21:39:43.215 +01:00 [INF] End processing HTTP request after 6.8687ms - 200
2021-02-02 21:39:43.255 +01:00 [INF] Start processing HTTP request POST "https://localhost:44318/connect/token"
2021-02-02 21:39:43.256 +01:00 [INF] Sending HTTP request POST "https://localhost:44318/connect/token"
2021-02-02 21:39:43.344 +01:00 [INF] Received HTTP response headers after 88.5326ms - 200
2021-02-02 21:39:43.344 +01:00 [INF] End processing HTTP request after 88.9033ms - 200
2021-02-02 21:39:43.348 +01:00 [INF] AuthenticationScheme: Cookies signed in.
2021-02-02 21:39:43.354 +01:00 [INF] Executing RedirectResult, redirecting to /Home/Secure.
2021-02-02 21:39:43.356 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.RenewTokens (MvcHybridBackChannel) in 234.0993ms
2021-02-02 21:39:43.357 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.RenewTokens (MvcHybridBackChannel)'
2021-02-02 21:39:43.358 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/home/renewtokens - - - 302 - - 5019.4132ms
2021-02-02 21:39:43.365 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:39:44.578 +01:00 [INF] Authorization was successful.
2021-02-02 21:39:44.578 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:39:44.578 +01:00 [INF] Route matched with {action = "Secure", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Secure() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:39:44.579 +01:00 [INF] Executing ViewResult, running view Secure.
2021-02-02 21:39:44.582 +01:00 [INF] Executed ViewResult - view Secure executed in 3.7145ms.
2021-02-02 21:39:44.583 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel) in 4.085ms
2021-02-02 21:39:44.583 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:39:44.584 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 200 - text/html;+charset=utf-8 1218.8736ms
2021-02-02 21:39:44.749 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - -
2021-02-02 21:39:44.750 +01:00 [INF] The file /css/vendor.min.css was not modified
2021-02-02 21:39:44.750 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - - - 304 - text/css 0.8767ms
2021-02-02 21:39:44.751 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - -
2021-02-02 21:39:44.751 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - -
2021-02-02 21:39:44.751 +01:00 [INF] The file /css/site.min.css was not modified
2021-02-02 21:39:44.752 +01:00 [INF] The file /js/vendor.min.js was not modified
2021-02-02 21:39:44.752 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - - - 304 - text/css 0.5840ms
2021-02-02 21:39:44.752 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - - - 304 - application/javascript 0.4858ms
2021-02-02 21:39:44.805 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - -
2021-02-02 21:39:44.806 +01:00 [INF] The file /js/site.min.js was not modified
2021-02-02 21:39:44.806 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - - - 304 - application/javascript 0.9818ms
2021-02-02 21:39:58.296 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:44327/logout application/x-www-form-urlencoded 929
2021-02-02 21:39:58.297 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel)'
2021-02-02 21:39:58.332 +01:00 [INF] Route matched with {action = "Index", controller = "Logout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller MvcHybrid.Controllers.LogoutController (MvcHybridBackChannel).
2021-02-02 21:40:09.916 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:40:09.916 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:40:10.019 +01:00 [INF] Received HTTP response headers after 102.8043ms - 200
2021-02-02 21:40:10.019 +01:00 [INF] End processing HTTP request after 103.3631ms - 200
2021-02-02 21:40:10.020 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:40:10.020 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:40:10.030 +01:00 [INF] Received HTTP response headers after 9.5019ms - 200
2021-02-02 21:40:10.030 +01:00 [INF] End processing HTTP request after 9.7944ms - 200
2021-02-02 21:40:10.075 +01:00 [WRN] Add a logout to the session: sub: 0d3c0b4e-a994-4824-8831-619396b42241, sid: 99C036A81ED17B84862D84EC3A9C0DBF
2021-02-02 21:40:10.945 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-02-02 21:40:10.945 +01:00 [INF] Executed action MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel) in 12612.8109ms
2021-02-02 21:40:10.945 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel)'
2021-02-02 21:40:10.946 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:44327/logout application/x-www-form-urlencoded 929 - 0 - - 12650.0609ms
2021-02-02 21:41:09.400 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:41:09.403 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-02-02 21:41:09.404 +01:00 [INF] AuthenticationScheme: oidc was challenged.
2021-02-02 21:41:09.430 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 302 - - 29.7027ms
2021-02-02 21:41:13.971 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44327/signin-oidc application/x-www-form-urlencoded 1640
2021-02-02 21:41:14.100 +01:00 [INF] AuthenticationScheme: Cookies signed in.
2021-02-02 21:41:14.102 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44327/signin-oidc application/x-www-form-urlencoded 1640 - 302 - - 130.8476ms
2021-02-02 21:41:14.135 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:41:16.373 +01:00 [INF] Authorization was successful.
2021-02-02 21:41:16.377 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:41:16.377 +01:00 [INF] Route matched with {action = "Secure", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Secure() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:41:16.378 +01:00 [INF] Executing ViewResult, running view Secure.
2021-02-02 21:41:16.408 +01:00 [INF] Executed ViewResult - view Secure executed in 30.1696ms.
2021-02-02 21:41:16.408 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel) in 30.879ms
2021-02-02 21:41:16.409 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:41:16.412 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 200 - text/html;+charset=utf-8 2276.6045ms
2021-02-02 21:41:16.521 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - -
2021-02-02 21:41:16.522 +01:00 [INF] The file /css/vendor.min.css was not modified
2021-02-02 21:41:16.522 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - - - 304 - text/css 0.8543ms
2021-02-02 21:41:16.523 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - -
2021-02-02 21:41:16.523 +01:00 [INF] The file /css/site.min.css was not modified
2021-02-02 21:41:16.524 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - - - 304 - text/css 0.7009ms
2021-02-02 21:41:16.525 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - -
2021-02-02 21:41:16.526 +01:00 [INF] The file /js/vendor.min.js was not modified
2021-02-02 21:41:16.526 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - - - 304 - application/javascript 0.8012ms
2021-02-02 21:41:16.558 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - -
2021-02-02 21:41:16.559 +01:00 [INF] The file /js/site.min.js was not modified
2021-02-02 21:41:16.559 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - - - 304 - application/javascript 0.8124ms
2021-02-02 21:43:02.175 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:44327/logout application/x-www-form-urlencoded 929
2021-02-02 21:43:02.176 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel)'
2021-02-02 21:43:02.176 +01:00 [INF] Route matched with {action = "Index", controller = "Logout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller MvcHybrid.Controllers.LogoutController (MvcHybridBackChannel).
2021-02-02 21:43:03.734 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:43:03.734 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:43:05.047 +01:00 [INF] Received HTTP response headers after 1312.7009ms - 200
2021-02-02 21:43:05.047 +01:00 [INF] End processing HTTP request after 1313.2768ms - 200
2021-02-02 21:43:05.048 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:43:05.048 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:43:05.054 +01:00 [INF] Received HTTP response headers after 5.5411ms - 200
2021-02-02 21:43:05.054 +01:00 [INF] End processing HTTP request after 6.0144ms - 200
2021-02-02 21:43:05.056 +01:00 [WRN] Add a logout to the session: sub: 0d3c0b4e-a994-4824-8831-619396b42241, sid: 3FD836544D35B1CE3D3EBF71BE862B40
2021-02-02 21:43:05.057 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-02-02 21:43:05.057 +01:00 [INF] Executed action MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel) in 2880.8848ms
2021-02-02 21:43:05.057 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel)'
2021-02-02 21:43:05.058 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:44327/logout application/x-www-form-urlencoded 929 - 200 - - 2883.0590ms
2021-02-02 21:43:25.894 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/home/renewtokens - -
2021-02-02 21:43:25.897 +01:00 [INF] Cookies was not authenticated. Failure message: Unprotect ticket failed
2021-02-02 21:43:25.897 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.RenewTokens (MvcHybridBackChannel)'
2021-02-02 21:43:25.897 +01:00 [INF] Route matched with {action = "RenewTokens", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RenewTokens() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:43:25.898 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:43:25.898 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:43:25.910 +01:00 [INF] Received HTTP response headers after 11.6089ms - 200
2021-02-02 21:43:25.911 +01:00 [INF] End processing HTTP request after 12.9164ms - 200
2021-02-02 21:43:25.912 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:43:25.913 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:43:25.917 +01:00 [INF] Received HTTP response headers after 4.564ms - 200
2021-02-02 21:43:25.917 +01:00 [INF] End processing HTTP request after 5.2359ms - 200
2021-02-02 21:43:25.918 +01:00 [INF] Cookies was not authenticated. Failure message: Unprotect ticket failed
2021-02-02 21:43:26.163 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.RenewTokens (MvcHybridBackChannel) in 265.4083ms
2021-02-02 21:43:26.164 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.RenewTokens (MvcHybridBackChannel)'
2021-02-02 21:43:26.167 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Parameter is required (Parameter 'refresh_token')
   at IdentityModel.Client.Parameters.AddRequired(String key, String value, Boolean allowDuplicates, Boolean allowEmptyValue)
   at IdentityModel.Client.HttpClientTokenRequestExtensions.RequestRefreshTokenAsync(HttpMessageInvoker client, RefreshTokenRequest request, CancellationToken cancellationToken)
   at MvcHybrid.Controllers.HomeController.RenewTokens() in C:\git\damienbod\AspNetCoreBackChannelLogout\MvcHybridBackChannel\Controllers\HomeController.cs:line 60
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-02-02 21:43:26.589 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/home/renewtokens - - - 500 - text/html;+charset=utf-8 695.4808ms
2021-02-02 21:43:31.525 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:43:31.526 +01:00 [INF] Cookies was not authenticated. Failure message: Unprotect ticket failed
2021-02-02 21:43:31.526 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-02-02 21:43:31.527 +01:00 [INF] AuthenticationScheme: oidc was challenged.
2021-02-02 21:43:31.529 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 302 - - 4.2003ms
2021-02-02 21:43:31.745 +01:00 [INF] Request starting HTTP/2 POST https://localhost:44327/signin-oidc application/x-www-form-urlencoded 1640
2021-02-02 21:43:31.861 +01:00 [INF] AuthenticationScheme: Cookies signed in.
2021-02-02 21:43:31.864 +01:00 [INF] Request finished HTTP/2 POST https://localhost:44327/signin-oidc application/x-www-form-urlencoded 1640 - 302 - - 118.3033ms
2021-02-02 21:43:31.877 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Secure - -
2021-02-02 21:43:33.753 +01:00 [INF] Authorization was successful.
2021-02-02 21:43:33.753 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:43:33.753 +01:00 [INF] Route matched with {action = "Secure", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Secure() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:43:33.753 +01:00 [INF] Executing ViewResult, running view Secure.
2021-02-02 21:43:33.755 +01:00 [INF] Executed ViewResult - view Secure executed in 2.3069ms.
2021-02-02 21:43:33.756 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel) in 2.987ms
2021-02-02 21:43:33.756 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Secure (MvcHybridBackChannel)'
2021-02-02 21:43:33.759 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Secure - - - 200 - text/html;+charset=utf-8 1881.9716ms
2021-02-02 21:43:33.845 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - -
2021-02-02 21:43:33.847 +01:00 [INF] The file /css/vendor.min.css was not modified
2021-02-02 21:43:33.847 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/vendor.min.css?v=UVTvIt7MaukWp4S1lnQMqlx0pONbtK-iw8KAk0Kf3JE - - - 304 - text/css 2.3939ms
2021-02-02 21:43:33.847 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - -
2021-02-02 21:43:33.848 +01:00 [INF] The file /js/vendor.min.js was not modified
2021-02-02 21:43:33.848 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/vendor.min.js?v=sILFq1ph39OwsyZsln-Qo9bc_aovGYySqEVf2DU8yoA - - - 304 - application/javascript 0.5592ms
2021-02-02 21:43:33.848 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - -
2021-02-02 21:43:33.848 +01:00 [INF] The file /css/site.min.css was not modified
2021-02-02 21:43:33.849 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/css/site.min.css?v=wuwIJNtYdLyR3lSouCYsICqYL6cZw3ZDpYmy3hthrcE - - - 304 - text/css 0.4975ms
2021-02-02 21:43:33.878 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - -
2021-02-02 21:43:33.878 +01:00 [INF] The file /js/site.min.js was not modified
2021-02-02 21:43:33.878 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/js/site.min.js?v=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU - - - 304 - application/javascript 0.8307ms
2021-02-02 21:43:37.365 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/Home/Logout - -
2021-02-02 21:43:45.880 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Logout (MvcHybridBackChannel)'
2021-02-02 21:43:45.883 +01:00 [INF] Route matched with {action = "Logout", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Logout() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:43:45.887 +01:00 [INF] Executing SignOutResult with authentication schemes (["Cookies","oidc"]).
2021-02-02 21:43:45.901 +01:00 [INF] AuthenticationScheme: Cookies signed out.
2021-02-02 21:43:45.905 +01:00 [INF] AuthenticationScheme: oidc signed out.
2021-02-02 21:43:45.906 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Logout (MvcHybridBackChannel) in 22.7489ms
2021-02-02 21:43:45.906 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Logout (MvcHybridBackChannel)'
2021-02-02 21:43:45.906 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/Home/Logout - - - 302 - - 8541.2986ms
2021-02-02 21:43:46.176 +01:00 [INF] Request starting HTTP/1.1 POST https://localhost:44327/logout application/x-www-form-urlencoded 929
2021-02-02 21:43:46.177 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel)'
2021-02-02 21:43:46.177 +01:00 [INF] Route matched with {action = "Index", controller = "Logout"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller MvcHybrid.Controllers.LogoutController (MvcHybridBackChannel).
2021-02-02 21:43:47.888 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:43:47.889 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration"
2021-02-02 21:43:47.897 +01:00 [INF] Received HTTP response headers after 8.6104ms - 200
2021-02-02 21:43:47.898 +01:00 [INF] End processing HTTP request after 9.558ms - 200
2021-02-02 21:43:47.900 +01:00 [INF] Start processing HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:43:47.900 +01:00 [INF] Sending HTTP request GET "https://localhost:44318/.well-known/openid-configuration/jwks"
2021-02-02 21:43:47.905 +01:00 [INF] Received HTTP response headers after 4.8986ms - 200
2021-02-02 21:43:47.905 +01:00 [INF] End processing HTTP request after 5.3107ms - 200
2021-02-02 21:43:47.908 +01:00 [WRN] Add a logout to the session: sub: 0d3c0b4e-a994-4824-8831-619396b42241, sid: E24917F59C7DDEC42986EB23892A4F6E
2021-02-02 21:43:47.908 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-02-02 21:43:47.908 +01:00 [INF] Executed action MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel) in 1731.4012ms
2021-02-02 21:43:47.908 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.LogoutController.Index (MvcHybridBackChannel)'
2021-02-02 21:43:47.909 +01:00 [INF] Request finished HTTP/1.1 POST https://localhost:44327/logout application/x-www-form-urlencoded 929 - 200 - - 1733.2282ms
2021-02-02 21:43:51.154 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/signout-callback-oidc?state=CfDJ8FgpqoU8xp9HgG-zABkzt7R6EP0vlXBOKY1R2e-Ka7XN0yTlrrlT_npXYqQ0-yfDr5o22lMufryjWoZ_Kgg2c-q9pPBHubQQTnD3tAE6z5k6Ujni3c50iBJqDeK3IlUqWhi85l1E7GZncoZuDyQKf65EAMq1jg-1ExKT32fi18TL - -
2021-02-02 21:43:51.163 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/signout-callback-oidc?state=CfDJ8FgpqoU8xp9HgG-zABkzt7R6EP0vlXBOKY1R2e-Ka7XN0yTlrrlT_npXYqQ0-yfDr5o22lMufryjWoZ_Kgg2c-q9pPBHubQQTnD3tAE6z5k6Ujni3c50iBJqDeK3IlUqWhi85l1E7GZncoZuDyQKf65EAMq1jg-1ExKT32fi18TL - - - 302 - - 8.4010ms
2021-02-02 21:43:51.173 +01:00 [INF] Request starting HTTP/2 GET https://localhost:44327/ - -
2021-02-02 21:43:51.174 +01:00 [INF] Executing endpoint 'MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel)'
2021-02-02 21:43:51.174 +01:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller MvcHybrid.Controllers.HomeController (MvcHybridBackChannel).
2021-02-02 21:43:51.174 +01:00 [INF] Executing ViewResult, running view Index.
2021-02-02 21:43:51.177 +01:00 [INF] Executed ViewResult - view Index executed in 3.4281ms.
2021-02-02 21:43:51.178 +01:00 [INF] Executed action MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel) in 3.761ms
2021-02-02 21:43:51.178 +01:00 [INF] Executed endpoint 'MvcHybrid.Controllers.HomeController.Index (MvcHybridBackChannel)'
2021-02-02 21:43:51.179 +01:00 [INF] Request finished HTTP/2 GET https://localhost:44327/ - - - 200 - text/html;+charset=utf-8 5.4022ms
